[target.x86_64-unknown-linux-gnu]
rustflags = [
  # Bake rpath into the binary so it can find shared libraries at runtime
  # $ORIGIN is a special linker variable meaning "directory containing the executable"
  # Binary is at backend/target/debug/, so we need to go up 3 levels to reach project root
  "-C", "link-arg=-Wl,-rpath,$ORIGIN/../../../native",
  "-C", "link-arg=-Wl,-rpath,$ORIGIN/../../../_deps/openzfs/lib",
]

[target.x86_64-unknown-freebsd]
rustflags = [
  # Same relative layout as Linux dev builds.
  "-C", "link-arg=-Wl,-rpath,$ORIGIN/../../../native",
  "-C", "link-arg=-Wl,-rpath,$ORIGIN/../../../_deps/openzfs/lib",
]
